!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("node-vibrant")):"function"==typeof define&&define.amd?define(["exports","react","node-vibrant"],t):t(e.ReactColorExtractor={},e.React,e.Vibrant)}(this,function(e,t,c){"use strict";c=c&&c.hasOwnProperty("default")?c.default:c;var p=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=function(s){function i(){var e,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o=p(this,s.call.apply(s,[this].concat(r)))).processImage=function(){var e=o.props;e.children?o.parseImage(e.children.props.src,e):e.src&&"string"==typeof e.src&&0<e.src.length&&o.parseImage(e.src,e)},o.parseImage=function(t,r){c.from(t).getSwatches().then(function(e){return r.getColors(o.getColorsFromSwatches(e,r))}).catch(function(e){e&&o.useDefaultImageClass(t,r)})},o.useDefaultImageClass=function(e,t){(new c.DefaultOpts.ImageClass).load(e.src).then(function(e){e.image&&c.from(e.image).getSwatches().then(function(e){return t.getColors(o.getColorsFromSwatches(e,t))}).catch(function(e){e&&t.onError(e)})}).catch(function(e){e&&t.onError(e)})},o.getColorsFromSwatches=function(e,t){var r=[];for(var o in e)e.hasOwnProperty(o)&&e[o]&&(t.rgb?r.push(e[o].getRgb()):r.push(e[o].getHex()));return r},p(o,e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s),i.prototype.componentDidMount=function(){this.processImage()},i.prototype.componentDidUpdate=function(e){e.src!==this.props.src&&"string"==typeof this.props.src&&0<this.props.src.length?this.parseImage(this.props.src,this.props):this.props.children&&e.children.props.src!==this.props.children.props.src&&this.parseImage(this.props.children.props.src,this.props)},i.prototype.render=function(){var e=t.Children.count(this.props.children);if(1<e)throw new Error("Expected only one image element.");if(1!==e)return null;if("img"===this.props.children.type)return this.props.children;throw new Error('Expected children to be an image element but instead got a "'+this.props.children.type+'"')},i}(t.Component);r.defaultProps={onError:function(e){},getColors:function(e){},rgb:!1,hex:!0,src:null};var o=c.Util.rgbToHex,n=c.Util.hexToRgb,s=c.Util.rgbToHsl,i=c.Util.hslToRgb;e.ColorExtractor=r,e.rgbToHex=o,e.hexToRgb=n,e.rgbToHsl=s,e.hslToRgb=i,Object.defineProperty(e,"__esModule",{value:!0})});
